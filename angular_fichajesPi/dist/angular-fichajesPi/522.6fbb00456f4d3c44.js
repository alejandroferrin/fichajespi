"use strict";(self.webpackChunkangular_fichajesPi=self.webpackChunkangular_fichajesPi||[]).push([[522],{522:(_,h,u)=>{u.r(h),u.d(h,{CalendarioModule:()=>B});var s=u(8870),m=u(1207),c=u(1659),e=u(9215),g=u(4537),d=u(6659);let Z=(()=>{class o{constructor(t){this.httpClient=t,this.endPoint=g.N.apiURL+"/calendario"}saveCalendar(t){return this.httpClient.post(this.endPoint+"/create",t)}getElements(){return this.httpClient.get(this.endPoint+"/list/dto")}detail(t){return this.httpClient.get(this.endPoint+`/${t}`)}update(t,n){return this.httpClient.put(this.endPoint+`/${t}`,n)}delete(t){return this.httpClient.delete(this.endPoint+`/${t}`)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(d.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var l=u(6603),C=u(8110),f=u(1307);class M{constructor(r,t){this.title="",this.date=r,this.isThisMonth=r.getMonth()===t.getMonth(),this.isWeekend=0===r.getDay()||6===r.getDay(),this.selected=!1}getDateString(){return this.formatDate(this.date)}formatDate(r){var t=r.getMonth()+1,n=r.getDate();return[r.getFullYear(),(t>9?"":"0")+t,(n>9?"":"0")+n].join("-")}}class v{constructor(r,t,n,a){this.dia=r,this.horaInicio=t,this.horaFin=n,this.calendarioNombre=a}}let q=(()=>{class o{transform(t,n){let a=[],i=[];return t.map((p,T)=>{i.push(p),++T%n==0&&(a.push(i),i=[])}),a}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"chunk",type:o,pure:!0}),o})();const b=function(o,r,t){return{holyday:o,"not-this-month":r,"bg-blue":t}};function y(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"td",6),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(3).addDay(i)}),e.TgZ(1,"div",7),e._uU(2),e.qZA(),e.qZA()}if(2&o){const t=r.$implicit;e.Q6J("ngClass",e.kEZ(2,b,t.isWeekend,!t.isThisMonth,t.selected)),e.xp6(2),e.hij("",t.date.getDate()," ")}}function D(o,r){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,y,3,6,"td",5),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function U(o,r){if(1&o&&(e.TgZ(0,"table",2),e.TgZ(1,"thead",3),e.TgZ(2,"tr",0),e.TgZ(3,"th"),e._uU(4,"L"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"M"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"X"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"J"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"V"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"S"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"D"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"tbody"),e.YNc(18,D,2,1,"tr",4),e.ALo(19,"chunk"),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(18),e.Q6J("ngForOf",e.xi3(19,1,t.calendar,7))}}let N=(()=>{class o{constructor(){this.calendar=[],this.monthNames=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],this.displayMonth="",this.year=0,this.month=0,this.horaInicio="",this.horaFin="",this.calendarioNombre="",this.added=new e.vpe}addDay(t){t.isThisMonth&&(this.calendar.map(n=>(n.date===t.date&&(n.selected=!n.selected),n)),this.added.emit(new v(t.getDateString(),this.horaInicio,this.horaFin,this.calendarioNombre)))}ngOnInit(){this.generateCalendarDays()}ngOnChanges(t){this.year=t.year.currentValue,this.generateCalendarDays()}generateCalendarDays(){this.calendar=[];let t=new Date(this.year,this.month-1);this.displayMonth=this.monthNames[t.getMonth()];let a=this.getStartDateForCalendar(t);for(var i=0;i<42;i++)this.calendar.push(new M(new Date(a),new Date(this.year,this.month-1))),a=new Date(a.setDate(a.getDate()+1))}getStartDateForCalendar(t){let a=new Date(t.setDate(0));if(1!=a.getDay())do{a=new Date(a.setDate(a.getDate()-1))}while(1!=a.getDay());return a}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-month"]],inputs:{year:"year",month:"month",horaInicio:"horaInicio",horaFin:"horaFin",calendarioNombre:"calendarioNombre"},outputs:{added:"added"},features:[e.TTD],decls:5,vars:2,consts:[[1,"text-center"],["class","calendar-table",4,"ngIf"],[1,"calendar-table"],[1,"light-blue"],[4,"ngFor","ngForOf"],["class","calendar-day text-center",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"calendar-day","text-center",3,"ngClass","click"],[1,"calendar-day-header"]],template:function(t,n){1&t&&(e.TgZ(0,"div"),e.TgZ(1,"div",0),e.TgZ(2,"h4"),e._uU(3),e.qZA(),e.qZA(),e.qZA(),e.YNc(4,U,20,4,"table",1)),2&t&&(e.xp6(3),e.hij(" ",n.displayMonth," "),e.xp6(1),e.Q6J("ngIf",n.calendar))},directives:[s.O5,s.sg,s.mk],pipes:[q],styles:[".calendar-table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%;max-width:100%;margin-bottom:1rem;border:1px solid #dee2e6;background-color:#fff;font-size:smaller}.calendar-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:bottom;border-bottom:2px solid #dee2e6;width:14.2%}.calendar-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .calendar-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #dee2e6}.calendar-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .calendar-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.3rem;vertical-align:top;border-top:1px solid #dee2e6}.calendar-day[_ngcontent-%COMP%]{max-height:12vh;cursor:pointer}.calendar-day[_ngcontent-%COMP%]:hover{background-color:#cecece}.not-this-month[_ngcontent-%COMP%]{color:#fff!important;background-color:#fff!important;cursor:auto}.not-this-month[_ngcontent-%COMP%]:hover{background-color:#fff}.holyday[_ngcontent-%COMP%]{color:#fff;background-color:#d21757}"]}),o})();function E(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",27),e.TgZ(1,"app-month",28),e.NdJ("added",function(a){return e.CHM(t),e.oxw().onAdded(a)}),e.qZA(),e.qZA()}if(2&o){const t=r.$implicit,n=e.oxw();e.xp6(1),e.Q6J("year",n.dto.year)("month",t)("horaInicio",n.horaInicio)("horaFin",n.horaFin)("calendarioNombre",n.dto.nombre)}}let x=(()=>{class o{constructor(t,n){this.service=t,this.router=n,this.monthsOfYear=[1,2,3,4,5,6,7,8,9,10,11,12],this.horaInicio="09:00",this.horaFin="17:00",this.dto={nombre:"Calendario "+(new Date).getFullYear(),year:(new Date).getFullYear(),minutosMasEntrada:0,minutosMenosEntrada:0,dias:[]}}onAdded(t){let n=!1;this.dto.dias.forEach(a=>{a.dia===t.dia&&(n=!0)}),n?this.dto.dias=this.dto.dias.filter(a=>t.dia!=a.dia):this.dto.dias.push(t)}onSave(){this.service.saveCalendar(this.dto).subscribe(t=>{c.G.toastSucess("","Calendario Guardado"),this.router.navigate(["intranet/calendario"])},t=>{c.G.toastDanger("Ocurri\xf3 un error",t.message),console.log(t)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z),e.Y36(m.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-calendario"]],decls:59,vars:9,consts:[[1,"mx-5","mt-5"],[1,"text-center","selected","mb-5","bg-waves","rounded","p-3"],["novalidate","",1,"mt-4",3,"ngSubmit"],["f","ngForm"],[1,"row","justify-content-end"],[1,"col-12","col-sm-6","col-md-4","col-lg-3","col-xl-2","d-flex","align-items-end","justify-content-end","mb-3"],[1,"form-group","small","w-100"],["for","year"],[1,"input-group","input-group-sm"],["type","number","name","year","id","year","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","nombre"],["type","text","name","nombre","id","nombre","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","minMas"],["type","number","name","minMas","id","minMas","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","minMenos"],["type","number","name","minMenos","id","minMenos","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","hEntrada"],["type","time","name","horaEntrada","id","horaEntrada","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","hSalida"],["type","time","name","horaSalida","id","horaSalida","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"w-100",3,"valid"],["routerLink","/intranet/calendario",1,"w-100"],[1,"w-100","mb-4","mt-4"],[1,"mx-auto","text-center","rounded","light-blue","p-2","w-25"],[1,"w-100","text-center","small"],[1,"row","mb-4"],["class","col-12 col-md-12 col-lg-6 col-xl-4",4,"ngFor","ngForOf"],[1,"col-12","col-md-12","col-lg-6","col-xl-4"],[3,"year","month","horaInicio","horaFin","calendarioNombre","added"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h2",1),e._uU(2,"Nuevo calendario"),e.qZA(),e.TgZ(3,"form",2,3),e.NdJ("ngSubmit",function(){return n.onSave()}),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"label",7),e.TgZ(9,"b"),e._uU(10," A\xf1o:"),e.qZA(),e.qZA(),e.TgZ(11,"div",8),e.TgZ(12,"input",9),e.NdJ("ngModelChange",function(i){return n.dto.year=i}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",5),e.TgZ(14,"div",6),e.TgZ(15,"label",10),e.TgZ(16,"b"),e._uU(17," Nombre:"),e.qZA(),e.qZA(),e.TgZ(18,"div",8),e.TgZ(19,"input",11),e.NdJ("ngModelChange",function(i){return n.dto.nombre=i}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",5),e.TgZ(21,"div",6),e.TgZ(22,"label",12),e.TgZ(23,"b"),e._uU(24," Minutos permitidos para entrar m\xe1s tarde:"),e.qZA(),e.qZA(),e.TgZ(25,"div",8),e.TgZ(26,"input",13),e.NdJ("ngModelChange",function(i){return n.dto.minutosMasEntrada=i}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",5),e.TgZ(28,"div",6),e.TgZ(29,"label",14),e.TgZ(30,"b"),e._uU(31," Minutos permitidos para entrar antes:"),e.qZA(),e.qZA(),e.TgZ(32,"div",8),e.TgZ(33,"input",15),e.NdJ("ngModelChange",function(i){return n.dto.minutosMenosEntrada=i}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"div",5),e.TgZ(35,"div",6),e.TgZ(36,"label",16),e.TgZ(37,"b"),e._uU(38," Hora entrada:"),e.qZA(),e.qZA(),e.TgZ(39,"div",8),e.TgZ(40,"input",17),e.NdJ("ngModelChange",function(i){return n.horaInicio=i}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"div",5),e.TgZ(42,"div",6),e.TgZ(43,"label",18),e.TgZ(44,"b"),e._uU(45," Hora salida:"),e.qZA(),e.qZA(),e.TgZ(46,"div",8),e.TgZ(47,"input",19),e.NdJ("ngModelChange",function(i){return n.horaFin=i}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(48,"div",5),e._UZ(49,"app-boton-guardar",20),e.qZA(),e.TgZ(50,"div",5),e._UZ(51,"app-boton-volver",21),e.qZA(),e.qZA(),e.qZA(),e.TgZ(52,"div",22),e.TgZ(53,"h2",23),e._uU(54),e.qZA(),e.TgZ(55,"p",24),e._uU(56,"Selecciona los d\xedas laborables pinchando en el calendario"),e.qZA(),e.qZA(),e.TgZ(57,"div",25),e.YNc(58,E,2,5,"div",26),e.qZA(),e.qZA()),2&t){const a=e.MAs(4);e.xp6(12),e.Q6J("ngModel",n.dto.year),e.xp6(7),e.Q6J("ngModel",n.dto.nombre),e.xp6(7),e.Q6J("ngModel",n.dto.minutosMasEntrada),e.xp6(7),e.Q6J("ngModel",n.dto.minutosMenosEntrada),e.xp6(7),e.Q6J("ngModel",n.horaInicio),e.xp6(7),e.Q6J("ngModel",n.horaFin),e.xp6(2),e.Q6J("valid",a.valid),e.xp6(5),e.hij("Calendario ",n.dto.year,""),e.xp6(4),e.Q6J("ngForOf",n.monthsOfYear)}},directives:[l._Y,l.JL,l.F,l.wV,l.Fj,l.Q7,l.JJ,l.On,C.Q,f.w,m.rH,s.sg,N],styles:[""]}),o})();function F(o,r){if(1&o&&(e.TgZ(0,"tr",8),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.qZA()),2&o){const t=r.$implicit;e.MGl("routerLink","/intranet/calendario/list/",t.id,""),e.xp6(2),e.Oqu(t.year),e.xp6(2),e.Oqu(t.nombre)}}let w=(()=>{class o{constructor(t){this.service=t,this.listaElementos=[]}ngOnInit(){this.listarElementos()}listarElementos(){this.service.getElements().subscribe(t=>{this.listaElementos=t},t=>{console.log(t)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-calendarios"]],decls:19,vars:1,consts:[[1,"text-center","selected","my-3","bg-waves","rounded","p-3"],[1,"row","justify-content-center"],[1,"col-12","col-md-6"],[1,"table","table-hover","text-center"],[3,"routerLink",4,"ngFor","ngForOf"],[1,"text-center","my-5"],["routerLink","/intranet/calendario/nuevo",1,"btn","btn-lg","bg-pink","text-white","shadow"],[1,"bi","bi-plus-circle"],[3,"routerLink"]],template:function(t,n){1&t&&(e.TgZ(0,"h3",0),e._uU(1,"Calendarios Creados"),e.qZA(),e.TgZ(2,"div",1),e.TgZ(3,"div",2),e.TgZ(4,"table",3),e.TgZ(5,"thead"),e.TgZ(6,"tr"),e.TgZ(7,"th"),e._uU(8,"A\xf1o"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Nombre"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"tbody"),e.YNc(12,F,5,3,"tr",4),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(13,"br"),e._UZ(14,"br"),e.TgZ(15,"div",5),e.TgZ(16,"button",6),e._UZ(17,"i",7),e._uU(18," Crear Nuevo Calendario "),e.qZA(),e.qZA()),2&t&&(e.xp6(12),e.Q6J("ngForOf",n.listaElementos))},directives:[s.sg,m.rH],styles:[""]}),o})();class J{constructor(r,t,n,a,i,p){this.nombre=r,this.year=t,this.minutosMasEntrada=n,this.minutosMenosEntrada=a,this.dias=i,this.active=p}}let A=(()=>{class o{constructor(t){this.httpClient=t,this.endPoint=g.N.apiURL+"/dia"}delete(t){return this.httpClient.delete(this.endPoint+`/${t}`)}save(t,n){return this.httpClient.post(this.endPoint+`/create/${t}`,n)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(d.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),O=(()=>{class o{transform(t,n){const a=Object.keys(n).filter(p=>n[p]);return a.length?t.filter(p=>a.every(T=>p[T]==n[T])):t}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"calendarFilter",type:o,pure:!0}),o})();function S(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"input",53),e.NdJ("ngModelChange",function(a){return e.CHM(t).$implicit.dia=a}),e.qZA(),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e.TgZ(6,"input",54),e.NdJ("ngModelChange",function(a){return e.CHM(t).$implicit.horaInicio=a}),e.qZA(),e.qZA(),e.TgZ(7,"td"),e.TgZ(8,"input",55),e.NdJ("ngModelChange",function(a){return e.CHM(t).$implicit.horaFin=a}),e.qZA(),e.qZA(),e.TgZ(9,"td",56),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw().onDeleteDay(i.id)}),e._UZ(10,"i",57),e.qZA(),e.qZA()}if(2&o){const t=r.$implicit,n=r.index,a=e.oxw();e.xp6(2),e.MGl("name","d-",n,""),e.Q6J("ngModel",t.dia),e.xp6(2),e.hij(" ",a.diasSemana[t.diaSemana]," "),e.xp6(2),e.MGl("name","horaEntrada-",n,""),e.Q6J("ngModel",t.horaInicio),e.xp6(2),e.MGl("name","horaSalida-",n,""),e.Q6J("ngModel",t.horaFin)}}const P=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:w},{path:"nuevo",component:x},{path:"nuevo/dia/:id",component:(()=>{class o{constructor(t,n,a){this.service=t,this.activatedRoute=n,this.router=a,this.model=new v("","","",""),this.id=0}ngOnInit(){this.id=this.activatedRoute.snapshot.params.id}onSave(){const t=this.activatedRoute.snapshot.params.id;console.log(t),console.log(this.model),this.service.save(t,this.model).subscribe(n=>{c.G.toastSucess("","D\xeda Guardado"),this.router.navigate([`intranet/calendario/list/${t}`])},n=>{c.G.toastDanger("Ocurri\xf3 un error",n.message),console.log(n)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A),e.Y36(m.gz),e.Y36(m.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-nuevo-dia"]],decls:31,vars:5,consts:[[1,"container-fluid"],[1,"my-3","text-center","selected","w-100"],["novalidate","",1,"mt-4",3,"ngSubmit"],["f","ngForm"],[1,"row","mb-4","justify-content-end"],[1,"col-12","col-sm-6","col-md-4","col-lg-3","col-xl-2","d-flex","align-items-end","justify-content-end","mb-3"],[1,"form-group","small","w-100"],["for","dia"],[1,"input-group","input-group-sm"],["type","date","name","dia","id","dia","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","hEntrada"],["type","time","name","horaEntrada","id","horaEntrada","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","hSalida"],["type","time","name","horaSalida","id","horaSalida","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"w-100",3,"valid"],[1,"w-100",3,"routerLink"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h3",1),e._uU(2,"A\xf1adir d\xeda al calendario"),e.qZA(),e.TgZ(3,"form",2,3),e.NdJ("ngSubmit",function(){return n.onSave()}),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"label",7),e.TgZ(9,"b"),e._uU(10,"Fecha:"),e.qZA(),e.qZA(),e.TgZ(11,"div",8),e.TgZ(12,"input",9),e.NdJ("ngModelChange",function(i){return n.model.dia=i}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",5),e.TgZ(14,"div",6),e.TgZ(15,"label",10),e.TgZ(16,"b"),e._uU(17," Hora entrada:"),e.qZA(),e.qZA(),e.TgZ(18,"div",8),e.TgZ(19,"input",11),e.NdJ("ngModelChange",function(i){return n.model.horaInicio=i}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",5),e.TgZ(21,"div",6),e.TgZ(22,"label",12),e.TgZ(23,"b"),e._uU(24," Hora salida:"),e.qZA(),e.qZA(),e.TgZ(25,"div",8),e.TgZ(26,"input",13),e.NdJ("ngModelChange",function(i){return n.model.horaFin=i}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",5),e._UZ(28,"app-boton-guardar",14),e.qZA(),e.TgZ(29,"div",5),e._UZ(30,"app-boton-volver",15),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const a=e.MAs(4);e.xp6(12),e.Q6J("ngModel",n.model.dia),e.xp6(7),e.Q6J("ngModel",n.model.horaInicio),e.xp6(7),e.Q6J("ngModel",n.model.horaFin),e.xp6(2),e.Q6J("valid",a.valid),e.xp6(2),e.MGl("routerLink","/intranet/calendario/list/",n.id,"")}},directives:[l._Y,l.JL,l.F,l.Fj,l.Q7,l.JJ,l.On,C.Q,f.w,m.rH],styles:[""]}),o})()},{path:"list/:id",component:(()=>{class o{constructor(t,n,a,i){this.service=t,this.diaService=n,this.activatedRoute=a,this.router=i,this.model=new J("",0,0,0,[],!1),this.diasSemana=["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"],this.id=0,this.diaSemana=null,this.diaFecha=null,this.mes=null}ngOnInit(){this.id=this.activatedRoute.snapshot.params.id,this.service.detail(this.id).subscribe(t=>{this.model=t,this.assignExtraData()},t=>{c.G.toastDanger("Ocurri\xf3 un error",t.message),console.log(t)})}assignExtraData(){this.model.dias.map(t=>{t.diaSemana=new Date(t.dia).getDay(),t.diaFecha=new Date(t.dia).getDate(),t.mes=new Date(t.dia).getMonth()})}onPropertyChange(t){return t.viewModel}onUpdate(){this.service.update(this.id,this.model).subscribe(t=>{c.G.toastSucess("","Cambios Guardados"),this.ngOnInit()},t=>{c.G.toastDanger("Ocurri\xf3 un error",t.message),console.log(t)})}onDelete(){const t=this.activatedRoute.snapshot.params.id;c.G.dangerConfirmBox("\xbfDesea eliminar el calendario?","Esta operaci\xf3n no se puede deshacer","SI","NO").openConfirmBox$().subscribe(n=>{n.Success&&this.delete(t)})}delete(t){this.service.delete(t).subscribe(n=>{c.G.toastWarning("","Calendario Eliminado"),this.router.navigate(["intranet/calendario"])},n=>{c.G.toastDanger("Ocurri\xf3 un error",n.message),console.log(n)})}onDeleteDay(t){c.G.dangerConfirmBox("\xbfDesea eliminar el D\xeda?","Esta operaci\xf3n no se puede deshacer","SI","NO").openConfirmBox$().subscribe(n=>{n.Success&&this.deleteDay(t)})}deleteDay(t){this.diaService.delete(t).subscribe(n=>{c.G.toastWarning("","D\xeda Eliminado"),this.ngOnInit()},n=>{c.G.toastDanger("Ocurri\xf3 un error",n.message),console.log(n)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z),e.Y36(A),e.Y36(m.gz),e.Y36(m.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-editar-calendario"]],decls:137,vars:14,consts:[[1,"container-fluid"],[1,"my-3","text-center","selected","bg-waves","rounded","p-3"],["novalidate","",1,"mt-4","mb-4","mx-5","bg-light","p-4","rounded"],["formFilter","ngForm"],[1,"row","px-4","justify-content-start"],[1,"col-12","col-sm-6","col-md-4","col-lg-3","d-flex","align-items-end","mb-3"],[1,"form-group","small","w-100"],[1,"selected"],[1,"col-12","col-sm-6","col-md-4","col-lg-3","d-flex","align-items-end","justify-content-end","mb-3"],["for","diaFecha"],[1,"input-group","input-group-sm"],["type","number","name","diaFecha","id","diaFecha",1,"form-control",3,"ngModel","ngModelChange"],["for","diaSemana"],["name","diaSemana","id","diaSemana",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["value","0"],["for","mes"],["name","mes","id","mes",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["value","7"],["value","8"],["value","9"],["value","10"],["value","11"],["novalidate","",1,"mt-4","mb-4","mx-5",3,"ngSubmit"],["f","ngForm"],[1,"row","mb-4","justify-content-center"],[1,"col-12","col-sm-6","col-md-4","col-lg-3","col-xl-2","d-flex","align-items-end","justify-content-end","mb-3"],["for","year"],["type","number","name","year","id","year","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","nombre"],["type","text","name","nombre","id","nombre","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","minMas"],["type","number","name","minMas","id","minMas","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","minMenos"],["type","number","name","minMenos","id","minMenos","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","active",1,"small"],["name","active","id","active",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["value","true"],["value","false"],[1,"w-100",3,"valid"],["routerLink","/intranet/calendario",1,"w-100"],[1,"table","text-center"],[4,"ngFor","ngForOf"],["colspan","4",1,"txt-blue","pinchable",3,"routerLink"],[1,"fs-4","bi","bi-plus-circle"],[1,"w-100","text-center","mb-5"],[1,"mx-auto","btn","btn-outline-danger","btn-sm",3,"click"],[1,"bi","bi-trash"],["type","text","id","d","required","",1,"form-control",3,"name","ngModel","ngModelChange"],["type","time","id","horaEntrada","required","",1,"form-control",3,"name","ngModel","ngModelChange"],["type","time","id","horaSalida","required","",1,"form-control",3,"name","ngModel","ngModelChange"],[3,"click"],[1,"bi","bi-trash","text-danger"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h3",1),e._uU(2,"Editar Calendario"),e.qZA(),e.TgZ(3,"form",2,3),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"h4",7),e._uU(9," Filtrar por D\xedas "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",8),e.TgZ(11,"div",6),e.TgZ(12,"label",9),e.TgZ(13,"b"),e._uU(14,"D\xeda mes:"),e.qZA(),e.qZA(),e.TgZ(15,"div",10),e.TgZ(16,"input",11),e.NdJ("ngModelChange",function(i){return n.diaFecha=i}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",8),e.TgZ(18,"div",6),e.TgZ(19,"label",12),e.TgZ(20,"b"),e._uU(21,"D\xeda semana:"),e.qZA(),e.qZA(),e.TgZ(22,"select",13),e.NdJ("ngModelChange",function(i){return n.diaSemana=i}),e._UZ(23,"option"),e.TgZ(24,"option",14),e._uU(25,"Lunes"),e.qZA(),e.TgZ(26,"option",15),e._uU(27,"Martes"),e.qZA(),e.TgZ(28,"option",16),e._uU(29,"Mi\xe9rcoles"),e.qZA(),e.TgZ(30,"option",17),e._uU(31,"Jueves"),e.qZA(),e.TgZ(32,"option",18),e._uU(33,"Viernes"),e.qZA(),e.TgZ(34,"option",19),e._uU(35,"S\xe1bado"),e.qZA(),e.TgZ(36,"option",20),e._uU(37,"Domingo"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",8),e.TgZ(39,"div",6),e.TgZ(40,"label",21),e.TgZ(41,"b"),e._uU(42,"Mes:"),e.qZA(),e.qZA(),e.TgZ(43,"select",22),e.NdJ("ngModelChange",function(i){return n.mes=i}),e._UZ(44,"option"),e.TgZ(45,"option",20),e._uU(46,"Enero"),e.qZA(),e.TgZ(47,"option",14),e._uU(48,"Febrero"),e.qZA(),e.TgZ(49,"option",15),e._uU(50,"Marzo"),e.qZA(),e.TgZ(51,"option",16),e._uU(52,"Abril"),e.qZA(),e.TgZ(53,"option",17),e._uU(54,"Mayo"),e.qZA(),e.TgZ(55,"option",18),e._uU(56,"Junio"),e.qZA(),e.TgZ(57,"option",19),e._uU(58,"Julio"),e.qZA(),e.TgZ(59,"option",23),e._uU(60,"Agosto"),e.qZA(),e.TgZ(61,"option",24),e._uU(62,"Septiembre"),e.qZA(),e.TgZ(63,"option",25),e._uU(64,"Octubre"),e.qZA(),e.TgZ(65,"option",26),e._uU(66,"Noviembre"),e.qZA(),e.TgZ(67,"option",27),e._uU(68,"Diciembre"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(69,"form",28,29),e.NdJ("ngSubmit",function(){return n.onUpdate()}),e.TgZ(71,"div",30),e.TgZ(72,"div",31),e.TgZ(73,"div",6),e.TgZ(74,"label",32),e.TgZ(75,"b"),e._uU(76,"A\xf1o:"),e.qZA(),e.qZA(),e.TgZ(77,"div",10),e.TgZ(78,"input",33),e.NdJ("ngModelChange",function(i){return n.model.year=i}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(79,"div",31),e.TgZ(80,"div",6),e.TgZ(81,"label",34),e.TgZ(82,"b"),e._uU(83,"Nombre:"),e.qZA(),e.qZA(),e.TgZ(84,"div",10),e.TgZ(85,"input",35),e.NdJ("ngModelChange",function(i){return n.model.nombre=i}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(86,"div",31),e.TgZ(87,"div",6),e.TgZ(88,"label",36),e.TgZ(89,"b"),e._uU(90," Minutos permitidos para entrar m\xe1s tarde:"),e.qZA(),e.qZA(),e.TgZ(91,"div",10),e.TgZ(92,"input",37),e.NdJ("ngModelChange",function(i){return n.model.minutosMasEntrada=i}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(93,"div",31),e.TgZ(94,"div",6),e.TgZ(95,"label",38),e.TgZ(96,"b"),e._uU(97," Minutos permitidos para entrar antes:"),e.qZA(),e.qZA(),e.TgZ(98,"div",10),e.TgZ(99,"input",39),e.NdJ("ngModelChange",function(i){return n.model.minutosMenosEntrada=i}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(100,"div",31),e.TgZ(101,"div",6),e.TgZ(102,"label",40),e.TgZ(103,"b"),e._uU(104,"Activo:"),e.qZA(),e.qZA(),e.TgZ(105,"select",41),e.NdJ("ngModelChange",function(i){return n.model.active=i}),e.TgZ(106,"option",42),e._uU(107,"Si"),e.qZA(),e.TgZ(108,"option",43),e._uU(109,"No"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(110,"div",31),e._UZ(111,"app-boton-guardar",44),e.qZA(),e.TgZ(112,"div",31),e._UZ(113,"app-boton-volver",45),e.qZA(),e.qZA(),e.TgZ(114,"table",46),e.TgZ(115,"thead"),e.TgZ(116,"tr"),e.TgZ(117,"th"),e._uU(118,"Fecha"),e.qZA(),e.TgZ(119,"th"),e._uU(120,"D\xeda Semana"),e.qZA(),e.TgZ(121,"th"),e._uU(122,"Hora entrada"),e.qZA(),e.TgZ(123,"th"),e._uU(124,"Hora salida"),e.qZA(),e.TgZ(125,"th"),e._uU(126,"Eliminar"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(127,"tbody"),e.YNc(128,S,11,7,"tr",47),e.ALo(129,"calendarFilter"),e.TgZ(130,"tr"),e.TgZ(131,"td",48),e._UZ(132,"i",49),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(133,"div",50),e.TgZ(134,"button",51),e.NdJ("click",function(){return n.onDelete()}),e._UZ(135,"i",52),e._uU(136," Eliminar Calendario "),e.qZA(),e.qZA(),e.qZA()),2&t){const a=e.MAs(4),i=e.MAs(70);e.xp6(16),e.Q6J("ngModel",n.diaFecha),e.xp6(6),e.Q6J("ngModel",n.diaSemana),e.xp6(21),e.Q6J("ngModel",n.mes),e.xp6(35),e.Q6J("ngModel",n.model.year),e.xp6(7),e.Q6J("ngModel",n.model.nombre),e.xp6(7),e.Q6J("ngModel",n.model.minutosMasEntrada),e.xp6(7),e.Q6J("ngModel",n.model.minutosMenosEntrada),e.xp6(6),e.Q6J("ngModel",n.model.active),e.xp6(6),e.Q6J("valid",i.valid),e.xp6(17),e.Q6J("ngForOf",e.xi3(129,11,n.model.dias,a.value)),e.xp6(3),e.MGl("routerLink","/intranet/calendario/nuevo/dia/",n.id,"")}},directives:[l._Y,l.JL,l.F,l.wV,l.Fj,l.JJ,l.On,l.EJ,l.YN,l.Kr,l.Q7,C.Q,f.w,m.rH,s.sg],pipes:[O],styles:[""]}),o})()}];let Q=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[m.Bz.forChild(P)],m.Bz]}),o})();var I=u(9544),L=u(7729);let B=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[Z,A],imports:[[s.ez,Q,I.m,L.I]]}),o})()},8110:(_,h,u)=>{u.d(h,{Q:()=>m});var s=u(9215);let m=(()=>{class c{constructor(){this.valid=null}ngOnInit(){}}return c.\u0275fac=function(g){return new(g||c)},c.\u0275cmp=s.Xpm({type:c,selectors:[["app-boton-guardar"]],inputs:{valid:"valid"},decls:3,vars:1,consts:[[1,"btn","bg-pink","text-white","w-100",3,"disabled"],[1,"bi","bi-save"]],template:function(g,d){1&g&&(s.TgZ(0,"button",0),s._UZ(1,"i",1),s._uU(2," Guardar"),s.qZA()),2&g&&s.Q6J("disabled",!d.valid)},styles:[""]}),c})()},1307:(_,h,u)=>{u.d(h,{w:()=>m});var s=u(9215);let m=(()=>{class c{constructor(){}ngOnInit(){}}return c.\u0275fac=function(g){return new(g||c)},c.\u0275cmp=s.Xpm({type:c,selectors:[["app-boton-volver"]],decls:3,vars:0,consts:[[1,"btn","bg-blue","w-100"],[1,"bi","bi-arrow-left-circle"]],template:function(g,d){1&g&&(s.TgZ(0,"div",0),s._UZ(1,"i",1),s._uU(2," Volver"),s.qZA())},styles:[""]}),c})()},1659:(_,h,u)=>{u.d(h,{G:()=>m});var s=u(1748);class m{static infoConfirmBox(e,g,d,Z){const l=new s.HK;return l.setTitle(e),l.setMessage(g),l.setButtonLabels(d,Z),l.setConfig({LayoutType:s.nM.INFO}),l}static successConfirmBox(e,g,d,Z){const l=new s.HK;return l.setTitle(e),l.setMessage(g),l.setButtonLabels(d,Z),l.setConfig({LayoutType:s.nM.SUCCESS}),l}static warningConfirmBox(e,g,d,Z){const l=new s.HK;return l.setTitle(e),l.setMessage(g),l.setButtonLabels(d,Z),l.setConfig({LayoutType:s.nM.WARNING}),l}static dangerConfirmBox(e,g,d,Z){const l=new s.HK;return l.setTitle(e),l.setMessage(g),l.setButtonLabels(d,Z),l.setConfig({LayoutType:s.nM.DANGER}),l}static toastSucess(e,g){const d=new s.s5;d.setTitle(e),d.setMessage(g),d.setConfig({AutoCloseDelay:this.closeTime,TextPosition:this.textPosition,LayoutType:s.nM.SUCCESS,ProgressBar:s.T5.NONE,ToastUserViewType:s.r0.STANDARD,ToastPosition:this.toastPosition}),d.openToastNotification$()}static toastDanger(e,g){const d=new s.s5;d.setTitle(e),d.setMessage(g),d.setConfig({AutoCloseDelay:this.closeTime,TextPosition:this.textPosition,LayoutType:s.nM.DANGER,ProgressBar:s.T5.NONE,ToastUserViewType:s.r0.STANDARD,ToastPosition:this.toastPosition}),d.openToastNotification$()}static toastWarning(e,g){const d=new s.s5;d.setTitle(e),d.setMessage(g),d.setConfig({AutoCloseDelay:this.closeTime,TextPosition:this.textPosition,LayoutType:s.nM.WARNING,ProgressBar:s.T5.NONE,ToastUserViewType:s.r0.STANDARD,ToastPosition:this.toastPosition}),d.openToastNotification$()}static toastINFO(e,g){const d=new s.s5;d.setTitle(e),d.setMessage(g),d.setConfig({AutoCloseDelay:this.closeTime,TextPosition:this.textPosition,LayoutType:s.nM.INFO,ProgressBar:s.T5.NONE,ToastUserViewType:s.r0.STANDARD,ToastPosition:this.toastPosition}),d.openToastNotification$()}}m.closeTime=8e3,m.textPosition="left",m.toastPosition=s.ht.TOP_CENTER}}]);